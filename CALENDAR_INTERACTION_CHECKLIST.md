# 日历事件交互检查清单

## 核心原则
- 完成/未完成的事件在交互上应该完全一致，只是排序位置不同
- 所有重叠的事件都应该正确"挤开"，不能互相覆盖
- 排序规则：未完成 > 已完成，然后按颜色优先级（红 > 黄 > 紫 > 绿 > 蓝 > 默认）

---

## 代码审查结果

### ✅ 已确认正确（代码层面）
- eventLayout.ts: 排序逻辑正确（完成状态 → 颜色优先级 → 开始时间 → 时长）
- eventLayout.ts: 冲突组识别和列分配逻辑正确
- MonthGrid.tsx: 排序逻辑与 eventLayout.ts 一致
- EventEditForm.tsx: 颜色选择器已实现，在标题下方
- TimeGrid/DayGrid: ghost event 有 completed: false 属性
- TimeGrid/DayGrid: 只有重叠时 ghost event 才参与布局计算
- EventBlock.tsx: store 更新间隔设为 0（立即更新）

### ⚠️ 需要用户测试验证
以下项目代码逻辑正确，但需要实际操作验证交互体验

---

## 一、静态显示

### 1.1 单个事件显示
- [ ] 未完成事件正常显示
- [ ] 已完成事件正常显示（带删除线、透明度降低）
- [ ] 不同颜色的事件正确显示对应颜色

### 1.2 重叠事件布局（无交互时）
- [ ] 两个未完成事件重叠：按颜色优先级排列，高优先级在左
- [ ] 两个已完成事件重叠：按颜色优先级排列，高优先级在左
- [ ] 未完成 + 已完成事件重叠：未完成在左，已完成在右
- [ ] 多个事件重叠：所有事件都能看到，宽度均分，不互相覆盖

---

## 二、拖动创建新事件

### 2.1 空白区域拖动创建
- [ ] 在空白区域拖动可以创建新事件
- [ ] 拖动时显示蓝色预览框（ghost event）
- [ ] 松开后打开编辑面板

### 2.2 拖动创建时与现有事件的交互
- [ ] 拖动到未完成事件旁边：未完成事件让位，预览框正确显示位置
- [ ] 拖动到已完成事件旁边：已完成事件让位，预览框正确显示位置
- [ ] 拖动到未完成+已完成事件旁边：所有事件都让位，布局正确
- [ ] 在远离现有事件的地方拖动：现有事件不受影响，不会移动或改变大小

---

## 三、拖动移动现有事件

### 3.1 拖动未完成事件
- [ ] 拖动到空白区域：事件跟随鼠标移动
- [ ] 拖动到另一个未完成事件位置：两个事件都调整位置，不覆盖
- [ ] 拖动到已完成事件位置：两个事件都调整位置，不覆盖
- [ ] 拖动到多个事件重叠的位置：所有事件都调整位置，不覆盖

### 3.2 拖动已完成事件
- [ ] 拖动到空白区域：事件跟随鼠标移动
- [ ] 拖动到未完成事件位置：两个事件都调整位置，不覆盖
- [ ] 拖动到另一个已完成事件位置：两个事件都调整位置，不覆盖
- [ ] 拖动到多个事件重叠的位置：所有事件都调整位置，不覆盖

### 3.3 拖动过程中的实时反馈
- [ ] 拖动时其他事件实时调整位置（不是松开后才调整）
- [ ] 拖动时不会出现事件互相覆盖的情况
- [ ] 拖动结束后布局稳定，不会"跳动"

---

## 四、拖动调整事件时长（边缘拖动）

### 4.1 调整未完成事件时长
- [ ] 向下拖动底边：事件变长
- [ ] 向上拖动底边：事件变短
- [ ] 向上拖动顶边：事件开始时间提前
- [ ] 向下拖动顶边：事件开始时间推迟
- [ ] 调整时长时与其他事件重叠：其他事件让位

### 4.2 调整已完成事件时长
- [ ] 同上所有操作应该与未完成事件一致

---

## 五、月视图特殊检查

### 5.1 事件排序
- [ ] 同一天的事件按优先级排序显示
- [ ] 未完成事件排在已完成事件前面
- [ ] 颜色优先级正确（红 > 黄 > 紫 > 绿 > 蓝 > 默认）

---

## 六、编辑面板

### 6.1 颜色选择器
- [ ] 点击事件后右侧面板显示颜色选择器
- [ ] 颜色选择器在标题下方
- [ ] 选择颜色后事件立即更新颜色
- [ ] 选择颜色后事件在布局中的位置可能变化（如果有重叠）

---

## 测试场景组合

### 场景 A：两个未完成事件
1. 创建红色未完成事件 9:00-10:00
2. 创建蓝色未完成事件 9:30-10:30
3. 预期：红色在左，蓝色在右

### 场景 B：未完成 + 已完成
1. 创建蓝色未完成事件 9:00-10:00
2. 创建红色已完成事件 9:30-10:30
3. 预期：蓝色（未完成）在左，红色（已完成）在右

### 场景 C：拖动已完成到未完成
1. 有一个未完成事件 9:00-10:00
2. 有一个已完成事件 11:00-12:00
3. 拖动已完成事件到 9:00-10:00
4. 预期：两个事件并排显示，未完成在左，已完成在右

### 场景 D：拖动创建到已完成旁边
1. 有一个已完成事件 9:00-10:00
2. 在 9:30 开始拖动创建新事件
3. 预期：已完成事件让位到右边，新事件预览在左边
